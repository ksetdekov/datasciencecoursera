https://www.r-graph-gallery.com/ - ghraph library


abline - horizontal line on graph
abline(v=median(ppm), col="magenta", lwd=4) - vertical
rug(ppm) -  vertical lines
names () -  names
boxplot(pm25~region, data = pollution, col="red") - 2 box plots by category!

2 histrograms 
par(mfrow=c(2,1),mar=c(4,4,2,1))
hist(east$pm25, col="green")
hist(subset(pollution, region == "west")$pm25, col="green")

scatter plot
with(pollution, plot(latitude, pm25))

2 side by side
par(mfrow = c(1, 2), mar = c(5, 4, 2, 1))

?Devices - list graphic devices
title(main="Old Faithful Geyser data") - title for a graph

create pdf
pdf(file="myplot.pdf")
with(faithful, plot(eruptions, waiting))
title(main="Old Faithful Geyser data")
dev.off()

par() function - specify global graphic parameters
 dev.copy2pdf specifically copies a plot to a PDF output device
dev.off()

dev.copy(png, file="geyserplot.png") copy to a PNG output
dev.off()

## ggplot plotting
qplot(displ, hwy, data = mpg)

range(airquality$Ozone, na.rm = TRUE)

#fancy boxlot
 boxplot(Ozone~Month, airquality, xlab="Month", ylab="Ozone (ppb)",col.axis="blue",col.lab="red")

#base plotting parameters
?par 

#base plotting
plot(airquality$Wind, type="n",airquality$Ozone)
title(main = "Wind and Ozone in NYC")
may <- subset(airquality, Month==5)
points(may$Wind,may$Ozone,col="blue",pch=17)
notmay <- subset(airquality, Month!=5)
points(notmay$Wind,notmay$Ozone,col="red",pch=8)
legend("topright", pch=c(17,8), col=c("blue","red"), legend = c("May","Other Months"))
abline(v=median(airquality$Wind),lty=2,lwd=2)

# 2 side by side
par(mfrow=c(1,2))
plot(airquality$Wind, airquality$Ozone, main="Ozone and Wind")
plot(airquality$Ozone, airquality$Solar.R, main="Ozone and Solar Radiation"

#margins
par(mfrow = c(1, 3), mar = c(4, 4, 2, 1), oma = c(0, 0, 2, 0))
plot(airquality$Wind, airquality$Ozone, main="Ozone and Wind")
plot(airquality$Solar.R, airquality$Ozone, main = "Ozone and Solar Radiation")
plot(airquality$Temp, airquality$Ozone, main = "Ozone and Temperature")
mtext("Ozone and Weather in New York City", outer = TRUE) #outer name

#sql read
library(sqldf)
DataPath <- "../household_power_consumption.txt"

## Load only lines with date = 1/2/2007 or 2/2/2007
Data <- read.csv.sql(DataPath,
                     sql = "select * from file where Date in('1/2/2007','2/2/2007')",
                     head=TRUE, sep = ";")

#lattice plotting
# median draw for each factor
p <- xyplot(y ~ x | f, panel = function(x, y, ...) {
  panel.xyplot(x, y, ...)  ## First call the default panel function for 'xyplot'
  panel.abline(h = median(y), lty = 2)  ## Add a horizontal line at the median
})
print(p)

# draw regression line
  panel.lmline(x, y, col = 2)  ## Overlay a simple linear regression line

gglot2(diamonds)


## colors
#make palette
> cols <- brewer.pal(3,"BuGn")
# make adjustable palette
> pal <- colorRampPalette(cols)
# use palette with interpolation
> image(volcano,col=pal(20))


##ggplot
qplot(displ, hwy, data = mpg)
# smooth lines can be added with 1 function call
qplot(displ, hwy, data = mpg, color = drv, geom=c("point", "smooth"))
qplot(drv, hwy, data = mpg, geom = "boxplot") #adding boxplots
#grouping by 2 variables 
qplot(drv, hwy, data = mpg, geom = "boxplot", color = manufacturer)
# colored histogram
qplot( hwy, data = mpg, fill = drv)

#how to add panesl (facets) 
qplot( displ, hwy, data = mpg, facets = .~drv)

#creating ggplot graphical objects 
g <- ggplot(mpg,aes(displ,hwy))
g+geom_point() # to actually draw plot

#vertical column of facets with histograms
g <- ggplot(mpg,aes(displ,hwy))
qplot( displ, hwy, data = mpg, facets = .~drv)

#using ggplot
g <- ggplot(mpg,aes(displ,hwy))
g+geom_point()+geom_smooth(method = "lm")+facet_grid(.~drv)+ggtitle("Swirl Rules!")

#adding changes to aes
g <- ggplot(mpg,aes(displ,hwy))
g+geom_point(color="pink", size=4, alpha = 1/2)

#labeling
g <- ggplot(mpg,aes(displ,hwy))
g + geom_point(aes(color = drv)) + labs(title="Swirl Rules!") + labs(x="Displacement", y="Hwy Mileage")

#modding regression lines
g <- ggplot(mpg,aes(displ,hwy))
g+geom_point(aes(color = drv), size=2, alpha = 1/2)+geom_smooth(size=4, linetype=3, method ="lm", se=FALSE)

#changing theme
g <- ggplot(mpg,aes(displ,hwy))
g+geom_point(aes(color = drv))+theme_bw(base_family = "Times")

#more complecated grid without margins and with factors
g <- ggplot(mpg,aes(displ,hwy))
g + geom_point() + facet_grid(drv~cyl,margins=TRUE)+geom_smooth(method="lm",size=2,se=FALSE,color="black")+labs(x="Displacement",y="Highway Mileage",title="Swirl Rules!")

#filled hist
qplot(price, data=diamonds, binwidth = 18497/30, fill=cut)
#density plot
qplot(price, data=diamonds, geom="density", color=cut)
#color on a scatter plot
qplot(carat, price, data=diamonds, color=cut)

#with facets
qplot(carat,price,data=diamonds, color=cut, facets=.~cut) + geom_smooth(method="lm")

#with ggplot
g <- ggplot(diamonds,aes(depth,price))
g+geom_point(alpha=1/3) #with opacity

#cutting into factor
cutpoints <- quantile(diamonds$carat, seq(0,1,length=4),na.rm = TRUE)
diamonds$car2 <- cut(diamonds$carat, cutpoints)
g+geom_point(alpha=1/3)+facet_grid(cut~car2)
g+geom_point(alpha=1/3)+facet_grid(cut~car2)+geom_smooth(method = "lm", size=3, color="pink")

#boxplot
ggplot(diamonds, aes(carat,price))+geom_boxplot()+facet_grid(.~cut)